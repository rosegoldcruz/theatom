"use strict";exports.id=549,exports.ids=[549],exports.modules={21549:(e,t,r)=>{r.d(t,{OpportunitiesPage:()=>g});var a=r(99888),s=r(89671),n=r(78536);let i=(0,r(47668).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var o=r(14512);let l=[{id:1,pair:"USDC/DAI",dex1:"Uniswap V3",dex2:"Curve",spread:.34,profit:847.32,gas:.024,status:"executing",timestamp:Date.now(),volume:5e4},{id:2,pair:"WETH/USDC",dex1:"Balancer",dex2:"Uniswap V2",spread:.89,profit:2394.71,gas:.056,status:"pending",timestamp:Date.now()-3e4,volume:1e5},{id:3,pair:"WBTC/USDT",dex1:"Curve",dex2:"Sushiswap",spread:1.23,profit:5847.93,gas:.084,status:"monitoring",timestamp:Date.now()-6e4,volume:75e3},{id:4,pair:"LINK/USDC",dex1:"Uniswap V2",dex2:"Balancer",spread:.67,profit:1247.84,gas:.032,status:"monitoring",timestamp:Date.now()-9e4,volume:25e3}];var d=r(59528);let c=e=>{let[t,r]=(0,s.useState)([]),[a,n]=(0,s.useState)(!0),[i,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(0),m=(0,s.useCallback)(async()=>{try{n(!0),o(null);let e=await d._J.getAll(),t=await e.json();t.success?(r(t.data?.opportunities||[]),c(t.data?.scanTimestamp||Date.now())):o(t.error||"Failed to fetch opportunities")}catch(e){o(e instanceof Error?e.message:"Unknown error")}finally{n(!1)}},[e]),u=(0,s.useCallback)(async e=>{try{let t=await fetch("/api/opportunities/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e||{})}),r=await t.json();if(r.success)return setTimeout(m,2e3),r.data;throw Error(r.error||"Failed to trigger scan")}catch(e){throw e}},[m]);return(0,s.useEffect)(()=>{m();let e=setInterval(m,15e3);return()=>clearInterval(e)},[m]),{opportunities:t,loading:a,error:i,lastScan:l,refetch:m,triggerScan:u}},m=()=>{let{opportunities:e}=c(),[t,r]=(0,s.useState)(l),[a,n]=(0,s.useState)(!1),[i,o]=(0,s.useState)(Date.now()),d=(0,s.useRef)(new Set),m=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=setTimeout(()=>{n(!0)},1e3);return()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>{e&&e.length>0&&(r(e.map((e,t)=>({id:"string"==typeof e.id?parseInt(e.id,10)||t+1:e.id||t+1,pair:e.pair||`TOKEN${t+1}/USDC`,dex1:e.dex1||"Uniswap V3",dex2:e.dex2||"Curve",spread:e.spread||2*Math.random(),profit:e.estimatedProfit||1e3*Math.random()+100,gas:e.estimatedGas||.1*Math.random()+.01,status:e.status||"monitoring",timestamp:e.timestamp||Date.now(),volume:e.volume||1e5*Math.random()+1e4}))),o(Date.now()))},[e]),(0,s.useEffect)(()=>{if(a)return m.current=setInterval(()=>{r(e=>{let t=e.map(e=>{let t=(Math.random()-.5)*.2,r=Math.max(.1,e.spread+t),a=Math.max(100,e.profit+1e3*t),s=e.status;if(.1>Math.random()){let e=["executing","pending","monitoring"];s=e[Math.floor(Math.random()*e.length)]}return{...e,spread:r,profit:a,status:s,timestamp:Date.now()}}),r={type:"opportunity_update",data:{opportunities:t},timestamp:Date.now()};return d.current.forEach(e=>{try{e(r)}catch(e){console.error("Error in WebSocket subscriber:",e)}}),t}),o(Date.now())},3e3),()=>{m.current&&clearInterval(m.current)}},[a]),(0,s.useEffect)(()=>{if(!a)return;let e=setInterval(()=>{if(.3>Math.random()){let e=t[Math.floor(Math.random()*t.length)],r={type:"trade_executed",data:{id:`trade_${Date.now()}`,pair:e.pair,profit:e.profit,status:"success",timestamp:Date.now()},timestamp:Date.now()};d.current.forEach(e=>{try{e(r)}catch(e){console.error("Error in WebSocket subscriber:",e)}})}},1e4);return()=>clearInterval(e)},[a,t]);let u=(0,s.useCallback)(e=>(d.current.add(e),()=>{d.current.delete(e)}),[]);return(0,s.useEffect)(()=>{if(!a)return;let e=setInterval(()=>{if(.1>Math.random()){let e=["running","stopped","paused"],t={type:"bot_status_change",data:{status:e[Math.floor(Math.random()*e.length)],timestamp:Date.now()},timestamp:Date.now()};d.current.forEach(e=>{try{e(t)}catch(e){console.error("Error in WebSocket subscriber:",e)}})}},15e3);return()=>clearInterval(e)},[a]),(0,s.useEffect)(()=>{if(!a)return;let e=setInterval(()=>{let e={type:"network_status",data:{network:"connected",gasPrice:`${Math.floor(50*Math.random()+10)} gwei`,blockNumber:Math.floor(1e6*Math.random()+18e6),timestamp:Date.now()},timestamp:Date.now()};d.current.forEach(t=>{try{t(e)}catch(e){console.error("Error in WebSocket subscriber:",e)}})},3e4);return()=>clearInterval(e)},[a]),{opportunities:t,isConnected:a,lastUpdate:i,subscribe:u}};var u=r(8773),p=r(97786),f=r(31681),x=r(50960);function h({className:e="",showHeader:t=!0,maxItems:r}){let{state:l}=(0,o.b)(),{isDark:d}=l,{opportunities:c,isConnected:h,lastUpdate:g}=m(),[y,b]=(0,s.useState)(new Set),j=r?c.slice(0,r):c,w=async e=>{b(t=>new Set(t).add(e.id)),setTimeout(()=>{b(t=>{let r=new Set(t);return r.delete(e.id),r})},3e3)},v=e=>a.jsx(f.C,{variant:"outline",className:`${{executing:"bg-blue-100 text-blue-700 border-blue-200",pending:"bg-yellow-100 text-yellow-700 border-yellow-200",monitoring:"bg-gray-100 text-gray-700 border-gray-200"}[e]} ${d?"dark:bg-opacity-20":""}`,children:e}),N=e=>{let t=Math.floor((Date.now()-e)/1e3);if(t<60)return`${t}s ago`;let r=Math.floor(t/60);return r<60?`${r}m ago`:`${Math.floor(r/60)}h ago`};return(0,a.jsxs)("div",{className:e,children:[t&&(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Live Opportunities"}),a.jsx("p",{className:`${d?"text-gray-400":"text-gray-500"}`,children:"Real-time arbitrage opportunities across DEXs"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${h?"bg-green-500 animate-pulse":"bg-red-500"}`}),a.jsx("span",{className:`text-sm font-medium ${h?"text-green-500":"text-red-500"}`,children:h?"Live Data":"Disconnected"})]}),(0,a.jsxs)(p.z,{variant:"outline",size:"sm",children:[a.jsx(n.Z,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),(0,a.jsxs)(u.Zb,{className:`${d?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} overflow-hidden`,children:[!t&&(0,a.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between",children:[a.jsx(u.ll,{children:"Live Opportunities"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${h?"bg-green-500 animate-pulse":"bg-red-500"}`}),a.jsx("span",{className:`text-sm ${h?"text-green-500":"text-red-500"}`,children:h?"Live":"Offline"})]})]}),a.jsx(u.aY,{className:"p-0",children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)(x.iA,{children:[a.jsx(x.xD,{className:`${d?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200"} border-b`,children:(0,a.jsxs)(x.SC,{children:[a.jsx(x.ss,{className:"font-medium",children:"Trading Pair"}),a.jsx(x.ss,{className:"font-medium",children:"DEX Route"}),a.jsx(x.ss,{className:"font-medium",children:"Spread"}),a.jsx(x.ss,{className:"font-medium",children:"Est. Profit"}),a.jsx(x.ss,{className:"font-medium",children:"Gas Cost"}),a.jsx(x.ss,{className:"font-medium",children:"Status"}),a.jsx(x.ss,{className:"font-medium",children:"Last Update"}),a.jsx(x.ss,{className:"font-medium",children:"Action"})]})}),a.jsx(x.RM,{children:j.map(e=>{let t=y.has(e.id);return(0,a.jsxs)(x.SC,{className:`${d?"border-gray-700 hover:bg-gray-700":"border-gray-200 hover:bg-gray-50"} border-b`,children:[a.jsx(x.pj,{children:a.jsx("div",{className:"font-medium",children:e.pair})}),a.jsx(x.pj,{children:(0,a.jsxs)("div",{className:"text-sm",children:[a.jsx("div",{children:e.dex1}),(0,a.jsxs)("div",{className:`${d?"text-gray-400":"text-gray-500"} flex items-center`,children:[a.jsx(i,{className:"w-3 h-3 mr-1"}),e.dex2]})]})}),a.jsx(x.pj,{children:(0,a.jsxs)("span",{className:"text-green-500 font-semibold",children:["+",e.spread.toFixed(2),"%"]})}),a.jsx(x.pj,{children:(0,a.jsxs)("span",{className:"font-semibold",children:["$",e.profit.toFixed(2)]})}),a.jsx(x.pj,{children:(0,a.jsxs)("span",{className:d?"text-gray-400":"text-gray-500",children:[e.gas.toFixed(4)," ETH"]})}),a.jsx(x.pj,{children:v(t?"executing":e.status)}),a.jsx(x.pj,{children:a.jsx("span",{className:`text-sm ${d?"text-gray-400":"text-gray-500"}`,children:e.timestamp?N(e.timestamp):"Just now"})}),a.jsx(x.pj,{children:a.jsx(p.z,{size:"sm",onClick:()=>w(e),disabled:t||"executing"===e.status,className:`${t||"executing"===e.status?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,children:t?"Executing...":"Execute"})})]},e.id)})})]})})})]}),(0,a.jsxs)("div",{className:`mt-4 text-sm ${d?"text-gray-400":"text-gray-500"} text-center`,children:["Last updated: ",new Date(g).toLocaleTimeString()]})]})}function g(){return a.jsx("div",{className:"p-6",children:a.jsx(h,{})})}},31681:(e,t,r)=>{r.d(t,{C:()=>o});var a=r(99888);r(89671);var s=r(33239),n=r(58921);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...r}){return a.jsx("div",{className:(0,n.cn)(i({variant:t}),e),...r})}},8773:(e,t,r)=>{r.d(t,{Ol:()=>o,SZ:()=>d,Zb:()=>i,aY:()=>c,ll:()=>l});var a=r(99888),s=r(89671),n=r(58921);let i=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let o=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=s.forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=s.forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",s.forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},50960:(e,t,r)=>{r.d(t,{RM:()=>l,SC:()=>d,iA:()=>i,pj:()=>m,ss:()=>c,xD:()=>o});var a=r(99888),s=r(89671),n=r(58921);let i=s.forwardRef(({className:e,...t},r)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:r,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let o=s.forwardRef(({className:e,...t},r)=>a.jsx("thead",{ref:r,className:(0,n.cn)("[&_tr]:border-b",e),...t}));o.displayName="TableHeader";let l=s.forwardRef(({className:e,...t},r)=>a.jsx("tbody",{ref:r,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",s.forwardRef(({className:e,...t},r)=>a.jsx("tfoot",{ref:r,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=s.forwardRef(({className:e,...t},r)=>a.jsx("tr",{ref:r,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let c=s.forwardRef(({className:e,...t},r)=>a.jsx("th",{ref:r,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let m=s.forwardRef(({className:e,...t},r)=>a.jsx("td",{ref:r,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));m.displayName="TableCell",s.forwardRef(({className:e,...t},r)=>a.jsx("caption",{ref:r,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},59528:(e,t,r)=>{r.d(t,{_J:()=>i,hi:()=>n});let a="http://localhost:8080";class s{async request(e,t){try{let r=await fetch(`${a}${e}`,{...t,headers:{"Content-Type":"application/json",...t?.headers}});if(!r.ok)throw Error(`API error: ${r.statusText}`);return await r.json()}catch(t){throw console.error(`API request failed: ${e}`,t),t}}async startBot(e){return this.request("/start",{method:"POST",body:JSON.stringify(e||{})})}async stopBot(){return this.request("/stop",{method:"POST"})}async getBotStatus(){return this.request("/status")}async getOpportunities(){return this.request("/opportunities")}async executeTrade(e){return this.request("/execute",{method:"POST",body:JSON.stringify({opportunityId:e})})}async getTradeHistory(e=50){return this.request(`/trades?limit=${e}`)}async getAnalytics(e="24h"){return this.request(`/analytics?timeframe=${e}`)}async getConfig(){return this.request("/config")}async updateConfig(e){return this.request("/config",{method:"PUT",body:JSON.stringify(e)})}connectWebSocket(e){let t=new WebSocket(`${a.replace("http","ws")}/ws`);return t.onmessage=t=>{let r=JSON.parse(t.data);switch(r.type){case"status":e.onStatus?.(r.payload);break;case"opportunity":e.onOpportunity?.(r.payload);break;case"trade":e.onTrade?.(r.payload)}},t.onerror=e=>{console.error("WebSocket error:",e)},t}}let n=new s,i={getAll:()=>fetch("/api/opportunities"),getById:e=>fetch(`/api/opportunities/${e}`)}},78536:(e,t,r)=>{r.d(t,{Z:()=>a});let a=(0,r(47668).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}};